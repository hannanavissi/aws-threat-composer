"use strict";(self.webpackChunk_aws_threat_composer=self.webpackChunk_aws_threat_composer||[]).push([[2546],{"./src/containers/WorkspaceInsights/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});__webpack_require__("../../node_modules/react/index.js");var WorkspaceInsights=__webpack_require__("./src/components/workspaces/WorkspaceInsights/index.tsx"),contexts=__webpack_require__("./src/contexts/index.ts"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const WorkspaceInsights_WorkspaceInsights=()=>(0,jsx_runtime.jsx)(contexts.Lf,{composerMode:"Full",children:(0,jsx_runtime.jsx)(WorkspaceInsights.Z,{})});WorkspaceInsights_WorkspaceInsights.displayName="WorkspaceInsights";const containers_WorkspaceInsights=WorkspaceInsights_WorkspaceInsights;try{WorkspaceInsights_WorkspaceInsights.displayName="WorkspaceInsights",WorkspaceInsights_WorkspaceInsights.__docgenInfo={description:"",displayName:"WorkspaceInsights",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/containers/WorkspaceInsights/index.tsx#WorkspaceInsights"]={docgenInfo:WorkspaceInsights_WorkspaceInsights.__docgenInfo,name:"WorkspaceInsights",path:"src/containers/WorkspaceInsights/index.tsx#WorkspaceInsights"})}catch(__react_docgen_typescript_loader_error){}const index_stories={title:"Others/WorkspaceInsights",component:containers_WorkspaceInsights},Default={};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]},"./src/contexts/ContextAggregator/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _GlobalSetupContext__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/contexts/GlobalSetupContext/index.tsx"),_WorkspaceContextAggregator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/contexts/WorkspaceContextAggregator/index.tsx"),_WorkspacesContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/contexts/WorkspacesContext/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const ContextAggregator=({children,onWorkspaceChanged,composerMode="Full",features,onPreview,onPreviewClose,onImported,onDefineWorkload,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_GlobalSetupContext__WEBPACK_IMPORTED_MODULE_0__.Z,{onPreview,onPreviewClose,onImported,features,onDefineWorkload,composerMode,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_WorkspacesContext__WEBPACK_IMPORTED_MODULE_2__.Z,{onWorkspaceChanged,...props,children:workspaceId=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_WorkspaceContextAggregator__WEBPACK_IMPORTED_MODULE_1__.Z,{workspaceId,requiredGlobalSetupContext:!1,onThreatEditorView:props.onThreatEditorView,onThreatListView:props.onThreatListView,children})})});ContextAggregator.displayName="ContextAggregator";const __WEBPACK_DEFAULT_EXPORT__=ContextAggregator;try{ContextAggregator.displayName="ContextAggregator",ContextAggregator.__docgenInfo={description:"",displayName:"ContextAggregator",props:{composerMode:{defaultValue:{value:"Full"},description:"",name:"composerMode",required:!1,type:{name:"enum",value:[{value:'"ThreatsOnly"'},{value:'"EditorOnly"'},{value:'"Full"'}]}},features:{defaultValue:null,description:"",name:"features",required:!1,type:{name:"string[]"}},onWorkspaceChanged:{defaultValue:null,description:"",name:"onWorkspaceChanged",required:!1,type:{name:"((workspaceId: string) => void)"}},onPreview:{defaultValue:null,description:"",name:"onPreview",required:!1,type:{name:"((content: { schema: number; workspace?: { name: string; id: string; }; applicationInfo?: { name?: string; description?: string | undefined; } | undefined; architecture?: { ...; } | undefined; ... 5 more ...; threats?: { ...; }[] | undefined; }) => void) | undefined"}},onPreviewClose:{defaultValue:null,description:"",name:"onPreviewClose",required:!1,type:{name:"(() => void)"}},onImported:{defaultValue:null,description:"",name:"onImported",required:!1,type:{name:"(() => void)"}},onDefineWorkload:{defaultValue:null,description:"",name:"onDefineWorkload",required:!1,type:{name:"(() => void)"}},onApplicationInfoView:{defaultValue:null,description:"",name:"onApplicationInfoView",required:!1,type:{name:"(() => void)"}},onArchitectureView:{defaultValue:null,description:"",name:"onArchitectureView",required:!1,type:{name:"(() => void)"}},onDataflowView:{defaultValue:null,description:"",name:"onDataflowView",required:!1,type:{name:"(() => void)"}},onAssumptionListView:{defaultValue:null,description:"",name:"onAssumptionListView",required:!1,type:{name:"(() => void)"}},onMitigationListView:{defaultValue:null,description:"",name:"onMitigationListView",required:!1,type:{name:"(() => void)"}},onThreatListView:{defaultValue:null,description:"",name:"onThreatListView",required:!1,type:{name:"((filter?: ThreatStatementListFilter) => void)"}},onThreatEditorView:{defaultValue:null,description:"",name:"onThreatEditorView",required:!1,type:{name:"((threatId: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/ContextAggregator/index.tsx#ContextAggregator"]={docgenInfo:ContextAggregator.__docgenInfo,name:"ContextAggregator",path:"src/contexts/ContextAggregator/index.tsx#ContextAggregator"})}catch(__react_docgen_typescript_loader_error){}},"./src/contexts/WorkspacesContext/context.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>useWorkspacesContext,z:()=>WorkspacesContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js");const initialState={workspaceList:[],setWorkspaceList:()=>{},currentWorkspace:null,switchWorkspace:()=>{},addWorkspace:()=>{},removeWorkspace:()=>Promise.resolve(),renameWorkspace:()=>{}},WorkspacesContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(initialState),useWorkspacesContext=()=>(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(WorkspacesContext)},"./src/contexts/WorkspacesContext/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>contexts_WorkspacesContext,$:()=>context.$});var react=__webpack_require__("../../node_modules/react/index.js"),es=__webpack_require__("../../node_modules/use-local-storage-state/es/index.js"),v4=__webpack_require__("../../node_modules/uuid/dist/esm-browser/v4.js"),context=__webpack_require__("./src/contexts/WorkspacesContext/context.ts"),constants=__webpack_require__("./src/configs/constants.ts"),localStorageKeys=__webpack_require__("./src/configs/localStorageKeys.ts"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const WorkspacesMigration=({children})=>{const{workspaceList,setWorkspaceList}=(0,context.$)(),[migrated,setMigrated]=(0,es.Z)(localStorageKeys.bd,{defaultValue:!1});return(0,react.useEffect)((()=>{migrated||(workspaceList.length>0&&"string"==typeof workspaceList[0]&&setWorkspaceList((prev=>{const newList=prev.map((p=>({id:(0,v4.Z)(),name:p})));return currentWorkspace&&"string"==typeof currentWorkspace&&setCurrentWorkspace((prevWs=>newList.find((x=>x.name===prevWs)))),newList})),setMigrated(!0))}),[workspaceList,migrated]),migrated&&children?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children}):null},migrations_WorkspacesMigration=WorkspacesMigration;try{WorkspacesMigration.displayName="WorkspacesMigration",WorkspacesMigration.__docgenInfo={description:"Migrates the old workspaces list to the new format",displayName:"WorkspacesMigration",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/migrations/WorkspacesMigration/index.tsx#WorkspacesMigration"]={docgenInfo:WorkspacesMigration.__docgenInfo,name:"WorkspacesMigration",path:"src/migrations/WorkspacesMigration/index.tsx#WorkspacesMigration"})}catch(__react_docgen_typescript_loader_error){}const WorkspacesContextProvider=({children,workspaceId,onWorkspaceChanged,...props})=>{const[currentWorkspace,setCurrentWorkspace]=(0,es.Z)(localStorageKeys.fY,{defaultValue:null}),[workspaceList,setWorkspaceList]=(0,es.Z)(localStorageKeys.Zh,{defaultValue:[]});(0,react.useEffect)((()=>{if(workspaceId)if(workspaceId===constants.Ac&&null!==currentWorkspace)setCurrentWorkspace(null);else if(workspaceId!==currentWorkspace?.id){const foundWorkspace=workspaceList.find((x=>x.id===workspaceId));setCurrentWorkspace(foundWorkspace||null)}}),[workspaceId,workspaceList,currentWorkspace]);const handleSwitchWorkspace=(0,react.useCallback)((workspace=>{setCurrentWorkspace(workspace),onWorkspaceChanged?.(workspace?.id||constants.Ac)}),[onWorkspaceChanged]),handleAddWorkspace=(0,react.useCallback)((workspaceName=>{const newWorkspace={id:(0,v4.Z)(),name:workspaceName};setWorkspaceList((prev=>prev.find((p=>p.name===workspaceName))?[...prev]:[...prev,newWorkspace])),setCurrentWorkspace(newWorkspace),onWorkspaceChanged?.(newWorkspace.id)}),[onWorkspaceChanged]),handleRemoveWorkspace=(0,react.useCallback)((async id=>{setWorkspaceList((prev=>prev.filter((p=>p.id!==id))))}),[]),handleRenameWorkspace=(0,react.useCallback)(((id,newWorkspaceName)=>{setWorkspaceList((prev=>{const index=prev.findIndex((w=>w.id===id));return[...prev.slice(0,index-1),{id,name:newWorkspaceName},...prev.slice(index+1)]})),setCurrentWorkspace({id,name:newWorkspaceName})}),[]);return(0,jsx_runtime.jsx)(context.z.Provider,{value:{workspaceList,setWorkspaceList,currentWorkspace,switchWorkspace:handleSwitchWorkspace,addWorkspace:handleAddWorkspace,removeWorkspace:handleRemoveWorkspace,renameWorkspace:handleRenameWorkspace,...props},children:(0,jsx_runtime.jsx)(migrations_WorkspacesMigration,{children:children(currentWorkspace?.id||null)})})};WorkspacesContextProvider.displayName="WorkspacesContextProvider";const contexts_WorkspacesContext=WorkspacesContextProvider;try{WorkspacesContext.displayName="WorkspacesContext",WorkspacesContext.__docgenInfo={description:"",displayName:"WorkspacesContext",props:{workspaceId:{defaultValue:null,description:"",name:"workspaceId",required:!1,type:{name:"string"}},onWorkspaceChanged:{defaultValue:null,description:"",name:"onWorkspaceChanged",required:!1,type:{name:"((workspaceId: string) => void)"}},onApplicationInfoView:{defaultValue:null,description:"",name:"onApplicationInfoView",required:!1,type:{name:"(() => void)"}},onArchitectureView:{defaultValue:null,description:"",name:"onArchitectureView",required:!1,type:{name:"(() => void)"}},onDataflowView:{defaultValue:null,description:"",name:"onDataflowView",required:!1,type:{name:"(() => void)"}},onAssumptionListView:{defaultValue:null,description:"",name:"onAssumptionListView",required:!1,type:{name:"(() => void)"}},onMitigationListView:{defaultValue:null,description:"",name:"onMitigationListView",required:!1,type:{name:"(() => void)"}},onThreatListView:{defaultValue:null,description:"",name:"onThreatListView",required:!1,type:{name:"((filter?: ThreatStatementListFilter) => void)"}},onThreatEditorView:{defaultValue:null,description:"",name:"onThreatEditorView",required:!1,type:{name:"((threatId: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/contexts/WorkspacesContext/index.tsx#WorkspacesContext"]={docgenInfo:WorkspacesContext.__docgenInfo,name:"WorkspacesContext",path:"src/contexts/WorkspacesContext/index.tsx#WorkspacesContext"})}catch(__react_docgen_typescript_loader_error){}},"./src/contexts/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$C:()=>_WorkspacesContext_context__WEBPACK_IMPORTED_MODULE_19__.$,Lf:()=>_ContextAggregator__WEBPACK_IMPORTED_MODULE_25__.Z,_m:()=>_AssumptionLinksContext_context__WEBPACK_IMPORTED_MODULE_5__._,eu:()=>_MitigationLinksContext_context__WEBPACK_IMPORTED_MODULE_13__.e,nk:()=>_GlobalSetupContext_context__WEBPACK_IMPORTED_MODULE_11__.n});__webpack_require__("./src/contexts/ApplicationContext/index.tsx"),__webpack_require__("./src/contexts/ApplicationContext/context.ts"),__webpack_require__("./src/contexts/ArchitectureContext/index.tsx"),__webpack_require__("./src/contexts/ArchitectureContext/context.ts"),__webpack_require__("./src/contexts/AssumptionLinksContext/index.tsx");var _AssumptionLinksContext_context__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/contexts/AssumptionLinksContext/context.ts"),_GlobalSetupContext_context__WEBPACK_IMPORTED_MODULE_11__=(__webpack_require__("./src/contexts/AssumptionsContext/index.tsx"),__webpack_require__("./src/contexts/AssumptionsContext/context.ts"),__webpack_require__("./src/contexts/DataflowContext/index.tsx"),__webpack_require__("./src/contexts/DataflowContext/context.ts"),__webpack_require__("./src/contexts/GlobalSetupContext/index.tsx"),__webpack_require__("./src/contexts/GlobalSetupContext/context.ts")),_MitigationLinksContext_context__WEBPACK_IMPORTED_MODULE_13__=(__webpack_require__("./src/contexts/MitigationLinksContext/index.tsx"),__webpack_require__("./src/contexts/MitigationLinksContext/context.ts")),_WorkspacesContext_context__WEBPACK_IMPORTED_MODULE_19__=(__webpack_require__("./src/contexts/MitigationsContext/index.tsx"),__webpack_require__("./src/contexts/MitigationsContext/context.ts"),__webpack_require__("./src/contexts/ThreatsContext/index.tsx"),__webpack_require__("./src/contexts/ThreatsContext/context.ts"),__webpack_require__("./src/contexts/WorkspacesContext/index.tsx"),__webpack_require__("./src/contexts/WorkspacesContext/context.ts")),_ContextAggregator__WEBPACK_IMPORTED_MODULE_25__=(__webpack_require__("./src/contexts/ThreatPacksContext/index.tsx"),__webpack_require__("./src/contexts/ThreatPacksContext/context.ts"),__webpack_require__("./src/contexts/MitigationPacksContext/index.tsx"),__webpack_require__("./src/contexts/MitigationPacksContext/context.ts"),__webpack_require__("./src/contexts/WorkspaceContextAggregator/index.tsx"),__webpack_require__("./src/contexts/ContextAggregator/index.tsx"))}}]);