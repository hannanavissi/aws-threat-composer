"use strict";(self.webpackChunk_aws_threat_composer=self.webpackChunk_aws_threat_composer||[]).push([[2262],{"./src/containers/MitigationList/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var react=__webpack_require__("../../node_modules/react/index.js"),components_button=__webpack_require__("../../node_modules/@cloudscape-design/components/button/index.js"),container=__webpack_require__("../../node_modules/@cloudscape-design/components/container/index.js"),grid=__webpack_require__("../../node_modules/@cloudscape-design/components/grid/index.js"),header=__webpack_require__("../../node_modules/@cloudscape-design/components/header/index.js"),space_between=__webpack_require__("../../node_modules/@cloudscape-design/components/space-between/index.js"),text_filter=__webpack_require__("../../node_modules/@cloudscape-design/components/text-filter/index.js"),contexts=__webpack_require__("./src/contexts/index.ts"),context=__webpack_require__("./src/contexts/MitigationsContext/context.ts"),LinkedEntityFilter=__webpack_require__("./src/components/generic/LinkedEntityFilter/index.tsx"),TagSelector=__webpack_require__("./src/components/generic/TagSelector/index.tsx"),column_layout=__webpack_require__("../../node_modules/@cloudscape-design/components/column-layout/index.js"),text_content=__webpack_require__("../../node_modules/@cloudscape-design/components/text-content/index.js"),customTypes=__webpack_require__("./src/customTypes/index.ts"),useEditMetadata=__webpack_require__("./src/hooks/useEditMetadata/index.ts"),AssumptionLink=__webpack_require__("./src/components/assumptions/AssumptionLink/index.tsx"),CopyToClipboard=__webpack_require__("./src/components/generic/CopyToClipboard/index.tsx"),EntityMetadataEditor=__webpack_require__("./src/components/generic/EntityMetadataEditor/index.tsx"),GenericCard=__webpack_require__("./src/components/generic/GenericCard/index.tsx"),Textarea=__webpack_require__("./src/components/generic/Textarea/index.tsx"),MitigationLinksContext_context=__webpack_require__("./src/contexts/MitigationLinksContext/context.ts"),ThreatsContext_context=__webpack_require__("./src/contexts/ThreatsContext/context.ts"),ThreatLinkView=__webpack_require__("./src/components/threats/ThreatLinkView/index.tsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const MitigationThreatLinkComponent=({mitigationId})=>{const{statementList}=(0,ThreatsContext_context.a)(),[mitigationLinks,setMitigationLinks]=(0,react.useState)([]),{getMitigtaionThreatLinks}=(0,MitigationLinksContext_context.e)();(0,react.useEffect)((()=>{const _mitigationLinks=getMitigtaionThreatLinks(mitigationId);setMitigationLinks(_mitigationLinks||[])}),[getMitigtaionThreatLinks,mitigationId]);const{addMitigationLink,removeMitigationLink}=(0,MitigationLinksContext_context.e)();return(0,jsx_runtime.jsx)(ThreatLinkView.Z,{threatList:statementList,linkedThreatIds:mitigationLinks.map((ml=>ml.linkedId)),onAddThreatLink:threatId=>addMitigationLink({linkedId:threatId,mitigationId}),onRemoveThreatLink:threatId=>removeMitigationLink(mitigationId,threatId)})};MitigationThreatLinkComponent.displayName="MitigationThreatLinkComponent";const mitigations_MitigationThreatLink=MitigationThreatLinkComponent;try{MitigationThreatLink.displayName="MitigationThreatLink",MitigationThreatLink.__docgenInfo={description:"",displayName:"MitigationThreatLink",props:{mitigationId:{defaultValue:null,description:"",name:"mitigationId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/mitigations/MitigationThreatLink/index.tsx#MitigationThreatLink"]={docgenInfo:MitigationThreatLink.__docgenInfo,name:"MitigationThreatLink",path:"src/components/mitigations/MitigationThreatLink/index.tsx#MitigationThreatLink"})}catch(__react_docgen_typescript_loader_error){}const MitigationCard=({entity,onCopy,onRemove,onEdit,onAddTagToEntity,onRemoveTagFromEntity})=>{const[editingMode,setEditingMode]=(0,react.useState)(!1),[editingValue,setEditingValue]=(0,react.useState)(entity.content),handleSave=(0,react.useCallback)((()=>{const updated={...entity,content:editingValue};onEdit?.(updated),setEditingMode(!1)}),[editingValue,entity,onEdit]),handleCancel=(0,react.useCallback)((()=>{setEditingValue(entity.content),setEditingMode(!1)}),[entity]),handleMetadataEdit=(0,useEditMetadata.Z)(onEdit);return(0,jsx_runtime.jsx)(GenericCard.Z,{header:`Mitigation ${entity.numericId}`,entityId:entity.id,tags:entity.tags,onCopy:()=>onCopy?.(entity.id),onRemove:()=>onRemove?.(entity.id),onEdit:()=>setEditingMode(!0),onAddTagToEntity:(_entityId,tag)=>onAddTagToEntity?.(entity,tag),onRemoveTagFromEntity:(_entityId,tag)=>onRemoveTagFromEntity?.(entity,tag),children:(0,jsx_runtime.jsxs)(space_between.Z,{direction:"vertical",size:"s",children:[(0,jsx_runtime.jsxs)(column_layout.Z,{columns:2,children:[editingMode?(0,jsx_runtime.jsxs)(space_between.Z,{direction:"vertical",size:"s",children:[(0,jsx_runtime.jsx)(Textarea.Z,{value:editingValue,onChange:({detail})=>setEditingValue(detail.value),validateData:customTypes.MitigationSchema.shape.content.safeParse,singleLine:!0}),(0,jsx_runtime.jsxs)(space_between.Z,{direction:"horizontal",size:"s",children:[(0,jsx_runtime.jsx)(components_button.Z,{onClick:handleCancel,children:"Cancel"}),(0,jsx_runtime.jsx)(components_button.Z,{variant:"primary",onClick:handleSave,children:"Save"})]})]}):(0,jsx_runtime.jsx)(text_content.Z,{children:(0,jsx_runtime.jsx)(CopyToClipboard.Z,{children:entity.content||""})}),(0,jsx_runtime.jsxs)(space_between.Z,{direction:"vertical",size:"s",children:[(0,jsx_runtime.jsx)(mitigations_MitigationThreatLink,{mitigationId:entity.id}),(0,jsx_runtime.jsx)(AssumptionLink.Z,{linkedEntityId:entity.id,type:"Mitigation"})]})]}),(0,jsx_runtime.jsx)(EntityMetadataEditor.Z,{variant:"default",entity,onEditEntity:handleMetadataEdit})]})})};MitigationCard.displayName="MitigationCard";const mitigations_MitigationCard=MitigationCard;try{MitigationCard.displayName="MitigationCard",MitigationCard.__docgenInfo={description:"",displayName:"MitigationCard",props:{entity:{defaultValue:null,description:"",name:"entity",required:!0,type:{name:"{ id: string; numericId: number; content: string; tags?: string[] | undefined; displayOrder?: number | undefined; metadata?: { value: (string | string[]) & (string | string[] | undefined); key: string; }[] | undefined; }"}},onCopy:{defaultValue:null,description:"",name:"onCopy",required:!1,type:{name:"((id: string) => void)"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"((id: string) => void)"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((entity: { id: string; numericId: number; content: string; tags?: string[]; displayOrder?: number; metadata?: { value: (string | string[]) & (string | string[] | undefined); key: string; }[] | undefined; }) => void) | undefined"}},onAddTagToEntity:{defaultValue:null,description:"",name:"onAddTagToEntity",required:!1,type:{name:"((entity: { id: string; numericId: number; content: string; tags?: string[]; displayOrder?: number; metadata?: { value: (string | string[]) & (string | string[] | undefined); key: string; }[] | undefined; }, tag: string) => void) | undefined"}},onRemoveTagFromEntity:{defaultValue:null,description:"",name:"onRemoveTagFromEntity",required:!1,type:{name:"((entity: { id: string; numericId: number; content: string; tags?: string[]; displayOrder?: number; metadata?: { value: (string | string[]) & (string | string[] | undefined); key: string; }[] | undefined; }, tag: string) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/mitigations/MitigationCard/index.tsx#MitigationCard"]={docgenInfo:MitigationCard.__docgenInfo,name:"MitigationCard",path:"src/components/mitigations/MitigationCard/index.tsx#MitigationCard"})}catch(__react_docgen_typescript_loader_error){}var configs=__webpack_require__("./src/configs/index.ts"),AssumptionsContext_context=__webpack_require__("./src/contexts/AssumptionsContext/context.ts"),AssumptionLinkView=__webpack_require__("./src/components/assumptions/AssumptionLinkView/index.tsx"),GenericEntityCreationCard=__webpack_require__("./src/components/generic/GenericEntityCreationCard/index.tsx");const MitigationCreationCard=({onSave})=>{const[editingEntity,setEditingEntity]=(0,react.useState)(GenericEntityCreationCard.N),[linkedAssumptionIds,setLinkedAssumptionIds]=(0,react.useState)([]),[linkedThreatIds,setLinkedThreatIds]=(0,react.useState)([]),{assumptionList,saveAssumption}=(0,AssumptionsContext_context.H)(),{statementList}=(0,ThreatsContext_context.a)(),handleSave=(0,react.useCallback)((()=>{onSave?.(editingEntity,linkedAssumptionIds,linkedThreatIds),setEditingEntity(GenericEntityCreationCard.N),setLinkedAssumptionIds([]),setLinkedThreatIds([])}),[editingEntity,linkedAssumptionIds,linkedThreatIds]),handleReset=(0,react.useCallback)((()=>{setEditingEntity(GenericEntityCreationCard.N),setLinkedAssumptionIds([]),setLinkedThreatIds([])}),[]),handleAddAssumptionLink=(0,react.useCallback)((assumptionIdOrNewAssumption=>{if(assumptionList.find((a=>a.id===assumptionIdOrNewAssumption)))setLinkedAssumptionIds((prev=>[...prev,assumptionIdOrNewAssumption]));else{const newAssumption=saveAssumption({numericId:-1,content:assumptionIdOrNewAssumption,id:configs.bU});setLinkedAssumptionIds((prev=>[...prev,newAssumption.id]))}}),[assumptionList,saveAssumption,setLinkedAssumptionIds]);return(0,jsx_runtime.jsx)(GenericEntityCreationCard.Z,{editingEntity,setEditingEntity,header:"Add new mitigation",onSave:handleSave,onReset:handleReset,customEditors:(0,jsx_runtime.jsxs)(space_between.Z,{direction:"vertical",size:"s",children:[(0,jsx_runtime.jsx)(ThreatLinkView.Z,{linkedThreatIds,threatList:statementList,onAddThreatLink:id=>setLinkedThreatIds((prev=>[...prev,id])),onRemoveThreatLink:id=>setLinkedThreatIds((prev=>prev.filter((p=>p!==id))))}),(0,jsx_runtime.jsx)(AssumptionLinkView.Z,{linkedAssumptionIds,assumptionList,onAddAssumptionLink:handleAddAssumptionLink,onRemoveAssumptionLink:id=>setLinkedAssumptionIds((prev=>prev.filter((p=>p!==id))))})]})})};MitigationCreationCard.displayName="MitigationCreationCard";const mitigations_MitigationCreationCard=MitigationCreationCard;try{MitigationCreationCard.displayName="MitigationCreationCard",MitigationCreationCard.__docgenInfo={description:"",displayName:"MitigationCreationCard",props:{onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"((entity: { id: string; numericId: number; content: string; tags?: string[]; displayOrder?: number; metadata?: { value: (string | string[]) & (string | string[] | undefined); key: string; }[] | undefined; }, linkedAssumptionIds: string[], linkedThreatIds: string[]) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/mitigations/MitigationCreationCard/index.tsx#MitigationCreationCard"]={docgenInfo:MitigationCreationCard.__docgenInfo,name:"MitigationCreationCard",path:"src/components/mitigations/MitigationCreationCard/index.tsx#MitigationCreationCard"})}catch(__react_docgen_typescript_loader_error){}const MitigationList=()=>{const{mitigationList,removeMitigation,saveMitigation}=(0,context.I)(),{addMitigationLinks,mitigationLinkList,removeMitigationLinksByMitigationId}=(0,contexts.eu)(),{addAssumptionLinks,assumptionLinkList,removeAssumptionLinksByLinkedEntityId}=(0,contexts._m)(),[filteringText,setFilteringText]=(0,react.useState)(""),[selectedTags,setSelectedTags]=(0,react.useState)([]),[selectedLinkedThreatsFilter,setSelectedLinkedThreatsFilter]=(0,react.useState)(LinkedEntityFilter.QN),[selectedLinkedAssumptionsFilter,setSelectedLinkedAssumptionsFilter]=(0,react.useState)(LinkedEntityFilter.QN),handleRemove=(0,react.useCallback)((async mitigationId=>{removeMitigation(mitigationId),await removeAssumptionLinksByLinkedEntityId(mitigationId),await removeMitigationLinksByMitigationId(mitigationId)}),[removeAssumptionLinksByLinkedEntityId,removeMitigation,removeMitigationLinksByMitigationId]),hasNoFilter=(0,react.useMemo)((()=>""===filteringText&&selectedLinkedAssumptionsFilter===LinkedEntityFilter.QN&&selectedLinkedThreatsFilter===LinkedEntityFilter.QN&&0===selectedTags.length),[filteringText,selectedTags,selectedLinkedThreatsFilter,selectedLinkedAssumptionsFilter]),handleClearFilter=(0,react.useCallback)((()=>{setFilteringText(""),setSelectedTags([]),setSelectedLinkedAssumptionsFilter(LinkedEntityFilter.QN),setSelectedLinkedThreatsFilter(LinkedEntityFilter.QN)}),[]),allTags=(0,react.useMemo)((()=>mitigationList.reduce(((all,cur)=>[...all,...cur.tags?.filter((ia=>!all.includes(ia)))||[]]),[])),[mitigationList]),handleAddTagToEntity=(0,react.useCallback)(((assumption,tag)=>{const updated={...assumption,tags:assumption.tags?assumption.tags.includes(tag)?assumption.tags:[...assumption.tags,tag]:[tag]};saveMitigation(updated)}),[saveMitigation]),handleRemoveTagFromEntity=(0,react.useCallback)(((assumption,tag)=>{const updated={...assumption,tags:assumption.tags?.filter((t=>t!==tag))};saveMitigation(updated)}),[saveMitigation]),filteredList=(0,react.useMemo)((()=>{let output=mitigationList;return filteringText&&(output=output.filter((st=>st.content&&st.content.toLowerCase().indexOf(filteringText.toLowerCase())>=0))),selectedTags&&selectedTags.length>0&&(output=output.filter((st=>st.tags?.some((t=>selectedTags.includes(t)))))),selectedLinkedThreatsFilter!==LinkedEntityFilter.QN&&(output=output.filter((st=>mitigationLinkList.some((ml=>ml.mitigationId===st.id))?selectedLinkedThreatsFilter===LinkedEntityFilter.X2:selectedLinkedThreatsFilter===LinkedEntityFilter.Nu))),selectedLinkedAssumptionsFilter!==LinkedEntityFilter.QN&&(output=output.filter((st=>assumptionLinkList.some((al=>al.linkedId===st.id))?selectedLinkedAssumptionsFilter===LinkedEntityFilter.X2:selectedLinkedAssumptionsFilter===LinkedEntityFilter.Nu))),output=output.sort(((op1,op2)=>(op2.displayOrder||Number.MAX_VALUE)-(op1.displayOrder||Number.MAX_VALUE))),output}),[filteringText,mitigationList,selectedTags,assumptionLinkList,mitigationLinkList,selectedLinkedAssumptionsFilter,selectedLinkedThreatsFilter]),handleSaveNew=(0,react.useCallback)(((mitigation,linkedAssumptionIds,linkedThreatIds)=>{const updated=saveMitigation(mitigation),mitigationLinks=[];linkedThreatIds.forEach((id=>{mitigationLinks.push({linkedId:id,mitigationId:updated.id})})),addMitigationLinks(mitigationLinks);const assumptionLinks=[];linkedAssumptionIds.forEach((id=>{assumptionLinks.push({linkedId:updated.id,assumptionId:id,type:"Mitigation"})})),addAssumptionLinks(assumptionLinks)}),[saveMitigation,addMitigationLinks,addAssumptionLinks]);return(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)(space_between.Z,{direction:"vertical",size:"s",children:[(0,jsx_runtime.jsx)(container.Z,{header:(0,jsx_runtime.jsx)(header.Z,{counter:`(${filteredList.length})`,children:"Mitigation List"}),children:(0,jsx_runtime.jsxs)(space_between.Z,{direction:"vertical",size:"s",children:[(0,jsx_runtime.jsx)(text_filter.Z,{filteringText,filteringPlaceholder:"Find mitigations",filteringAriaLabel:"Filter mitigations",onChange:({detail})=>setFilteringText(detail.filteringText)}),(0,jsx_runtime.jsxs)(grid.Z,{gridDefinition:[{colspan:{default:12,xs:3}},{colspan:{default:12,xs:4}},{colspan:{default:12,xs:4}},{colspan:{default:1}}],children:[(0,jsx_runtime.jsx)(TagSelector.Z,{allTags,selectedTags,setSelectedTags}),(0,jsx_runtime.jsx)(LinkedEntityFilter.ZP,{label:"Linked threats",entityDisplayName:"threats",selected:selectedLinkedThreatsFilter,setSelected:setSelectedLinkedThreatsFilter}),(0,jsx_runtime.jsx)(LinkedEntityFilter.ZP,{label:"Linked assumptions",entityDisplayName:"assumptions",selected:selectedLinkedAssumptionsFilter,setSelected:setSelectedLinkedAssumptionsFilter}),(0,jsx_runtime.jsx)(components_button.Z,{onClick:handleClearFilter,variant:"icon",iconSvg:(0,jsx_runtime.jsx)("svg",{focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24",tabIndex:-1,children:(0,jsx_runtime.jsx)("path",{d:"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97 4.99-6.36zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41L2.81 2.81z"})}),ariaLabel:"Clear filters",disabled:hasNoFilter})]})]})}),filteredList?.map((entity=>(0,jsx_runtime.jsx)(mitigations_MitigationCard,{entity,onRemove:handleRemove,onEdit:saveMitigation,onAddTagToEntity:handleAddTagToEntity,onRemoveTagFromEntity:handleRemoveTagFromEntity},entity.id))),(0,jsx_runtime.jsx)(mitigations_MitigationCreationCard,{onSave:handleSaveNew})]})})};MitigationList.displayName="MitigationList";const mitigations_MitigationList=MitigationList;try{MitigationList.displayName="MitigationList",MitigationList.__docgenInfo={description:"",displayName:"MitigationList",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/mitigations/MitigationList/index.tsx#MitigationList"]={docgenInfo:MitigationList.__docgenInfo,name:"MitigationList",path:"src/components/mitigations/MitigationList/index.tsx#MitigationList"})}catch(__react_docgen_typescript_loader_error){}var WorkspaceContextAggregator=__webpack_require__("./src/contexts/WorkspaceContextAggregator/index.tsx");const MitigationList_MitigationList=({workspaceId})=>(0,jsx_runtime.jsx)(WorkspaceContextAggregator.Z,{requiredGlobalSetupContext:!0,workspaceId:workspaceId||null,composerMode:"Full",children:(0,jsx_runtime.jsx)(mitigations_MitigationList,{})});MitigationList_MitigationList.displayName="MitigationList";const containers_MitigationList=MitigationList_MitigationList;try{MitigationList_MitigationList.displayName="MitigationList",MitigationList_MitigationList.__docgenInfo={description:"",displayName:"MitigationList",props:{workspaceId:{defaultValue:null,description:"",name:"workspaceId",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/containers/MitigationList/index.tsx#MitigationList"]={docgenInfo:MitigationList_MitigationList.__docgenInfo,name:"MitigationList",path:"src/containers/MitigationList/index.tsx#MitigationList"})}catch(__react_docgen_typescript_loader_error){}const index_stories={title:"fullMode/MitigationList",component:containers_MitigationList},Default={};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]},"./src/components/assumptions/AssumptionLink/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_configs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/configs/index.ts"),_contexts_AssumptionLinksContext_context__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/contexts/AssumptionLinksContext/context.ts"),_contexts_AssumptionsContext_context__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/contexts/AssumptionsContext/context.ts"),_AssumptionLinkView__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/assumptions/AssumptionLinkView/index.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const AssumptionLinkComponent=({linkedEntityId,type})=>{const{assumptionList,saveAssumption}=(0,_contexts_AssumptionsContext_context__WEBPACK_IMPORTED_MODULE_3__.H)(),[assumptionLinks,setAssumptionLinks]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]),{getLinkedAssumptionLinks}=(0,_contexts_AssumptionLinksContext_context__WEBPACK_IMPORTED_MODULE_2__._)();(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const _assumptionLinks=getLinkedAssumptionLinks(linkedEntityId);setAssumptionLinks(_assumptionLinks||[])}),[getLinkedAssumptionLinks,linkedEntityId]);const{addAssumptionLink,removeAssumptionLink}=(0,_contexts_AssumptionLinksContext_context__WEBPACK_IMPORTED_MODULE_2__._)(),handleAddAssumptionLink=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((assumptionIdOrNewAssumption=>{if(assumptionList.find((a=>a.id===assumptionIdOrNewAssumption)))addAssumptionLink({type,linkedId:linkedEntityId,assumptionId:assumptionIdOrNewAssumption});else{const newAssumption=saveAssumption({numericId:-1,content:assumptionIdOrNewAssumption,id:_configs__WEBPACK_IMPORTED_MODULE_1__.bU});addAssumptionLink({type,linkedId:linkedEntityId,assumptionId:newAssumption.id})}}),[assumptionList,linkedEntityId,addAssumptionLink,saveAssumption]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_AssumptionLinkView__WEBPACK_IMPORTED_MODULE_4__.Z,{assumptionList,linkedAssumptionIds:assumptionLinks.map((al=>al.assumptionId))||[],onAddAssumptionLink:handleAddAssumptionLink,onRemoveAssumptionLink:assumptionId=>removeAssumptionLink(assumptionId,linkedEntityId)})};AssumptionLinkComponent.displayName="AssumptionLinkComponent";const __WEBPACK_DEFAULT_EXPORT__=AssumptionLinkComponent;try{AssumptionLink.displayName="AssumptionLink",AssumptionLink.__docgenInfo={description:"",displayName:"AssumptionLink",props:{linkedEntityId:{defaultValue:null,description:"",name:"linkedEntityId",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"Mitigation"'},{value:'"Threat"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/assumptions/AssumptionLink/index.tsx#AssumptionLink"]={docgenInfo:AssumptionLink.__docgenInfo,name:"AssumptionLink",path:"src/components/assumptions/AssumptionLink/index.tsx#AssumptionLink"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/assumptions/AssumptionLinkView/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _cloudscape_design_components_autosuggest__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@cloudscape-design/components/autosuggest/index.js"),_cloudscape_design_components_expandable_section__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@cloudscape-design/components/expandable-section/index.js"),_cloudscape_design_components_token_group__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@cloudscape-design/components/token-group/index.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const AssumptionLinkComponent=({linkedAssumptionIds,assumptionList,onAddAssumptionLink,onRemoveAssumptionLink,variant})=>{const[searchValue,setSearchValue]=react__WEBPACK_IMPORTED_MODULE_0__.useState(""),linkedAssumptions=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>assumptionList.filter((al=>linkedAssumptionIds.includes(al.id)))),[linkedAssumptionIds,assumptionList]),filteredAssumptions=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>{const assumptions=assumptionList.filter((x=>!linkedAssumptionIds.includes(x.id)));return searchValue?assumptions.filter((x=>x.content.toLowerCase().indexOf(searchValue.toLowerCase())>=0)):assumptions}),[searchValue,assumptionList,linkedAssumptionIds]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_cloudscape_design_components_expandable_section__WEBPACK_IMPORTED_MODULE_2__.Z,{variant,headingTagOverride:"container"===variant?"h3":void 0,headerText:`Linked assumptions (${linkedAssumptions.length})`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_cloudscape_design_components_autosuggest__WEBPACK_IMPORTED_MODULE_3__.Z,{onChange:({detail})=>setSearchValue(detail.value),value:searchValue,options:filteredAssumptions.map((x=>({value:x.id,label:x.content}))),onSelect:({detail})=>{onAddAssumptionLink(detail.value),setSearchValue("")},filteringType:"manual",enteredTextLabel:value=>`Add new assumption: "${value}"`,placeholder:"Search assumption",empty:"No matches found"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_cloudscape_design_components_token_group__WEBPACK_IMPORTED_MODULE_4__.Z,{items:linkedAssumptions.map((x=>({label:x.content,dismissLabel:`Unlink assumption ${x.numericId}`}))),onDismiss:({detail:{itemIndex}})=>{onRemoveAssumptionLink(linkedAssumptions[itemIndex].id)}})]})};AssumptionLinkComponent.displayName="AssumptionLinkComponent";const __WEBPACK_DEFAULT_EXPORT__=AssumptionLinkComponent;try{AssumptionLinkView.displayName="AssumptionLinkView",AssumptionLinkView.__docgenInfo={description:"",displayName:"AssumptionLinkView",props:{variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"footer"'},{value:'"container"'},{value:'"stacked"'},{value:'"default"'},{value:'"navigation"'}]}},linkedAssumptionIds:{defaultValue:null,description:"",name:"linkedAssumptionIds",required:!0,type:{name:"string[]"}},assumptionList:{defaultValue:null,description:"",name:"assumptionList",required:!0,type:{name:"{ id: string; numericId: number; content: string; tags?: string[] | undefined; displayOrder?: number | undefined; metadata?: { value: (string | string[]) & (string | string[] | undefined); key: string; }[] | undefined; valid?: boolean | undefined; }[]"}},onAddAssumptionLink:{defaultValue:null,description:"",name:"onAddAssumptionLink",required:!0,type:{name:"(assumptionId: string) => void"}},onRemoveAssumptionLink:{defaultValue:null,description:"",name:"onRemoveAssumptionLink",required:!0,type:{name:"(assumptionId: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/assumptions/AssumptionLinkView/index.tsx#AssumptionLinkView"]={docgenInfo:AssumptionLinkView.__docgenInfo,name:"AssumptionLinkView",path:"src/components/assumptions/AssumptionLinkView/index.tsx#AssumptionLinkView"})}catch(__react_docgen_typescript_loader_error){}}}]);